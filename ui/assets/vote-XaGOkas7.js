const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BkZ1fbvE.js","assets/index-D7VafxmD.css"])))=>i.map(i=>d[i]);
import{y as d,Y as i,a9 as f,t as n}from"./index-BkZ1fbvE.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M5 12h14",key:"1ays0h"}]],b=d("minus",w);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],u=d("thumbs-down",g);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],k=d("thumbs-up",v),M={GOOD:"good",MEDIUM:"medium",BAD:"bad"};async function L(t){try{return(await i.get(`/v1/admin/vote/message/${t}`)).data}catch(e){return e.response?.status===404?(console.log(`消息 ${t} 没有投票记录`),null):(console.error("获取投票信息失败:",e),null)}}async function U(t,e,a){try{const o=await i.post("/v1/admin/vote/",{message_id:t,vote_type:e,feedback:a});return n.success("投票成功"),o.data}catch(o){throw n.error(o.response?.data?.detail||o.message||"投票失败"),o}}async function x(t={}){try{const e=new URLSearchParams;e.append("page",(t.page||1).toString()),e.append("size",(t.size||10).toString()),t.vote_type&&e.append("vote_type",t.vote_type),t.start_date&&e.append("start_date",t.start_date),t.end_date&&e.append("end_date",t.end_date),t.searchKeyword&&e.append("searchKeyword",t.searchKeyword),t.client_type&&e.append("client_type",t.client_type);const a=await i.get(`/v1/admin/vote/with_messages?${e.toString()}`);return console.log("response",a),a.data}catch(e){throw console.error("获取投票统计失败:",e),e}}async function R(t={}){try{const e=new URLSearchParams;t.vote_type&&e.append("vote_type",t.vote_type),t.start_date&&e.append("start_date",t.start_date),t.end_date&&e.append("end_date",t.end_date),t.searchKeyword&&e.append("searchKeyword",t.searchKeyword),t.client_type&&e.append("client_type",t.client_type);const a=(await f(async()=>{const{default:r}=await import("./index-BkZ1fbvE.js").then(m=>m.aD);return{default:r}},__vite__mapDeps([0,1]))).default,o="/znkfzs",p=localStorage.getItem("access_token"),l=await a.get(`${o}/v1/admin/vote/export/excel?${e.toString()}`,{responseType:"blob",headers:p?{Authorization:`Bearer ${p}`}:{}}),_=l.headers["content-disposition"];let c=`问答数据_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;if(_){const r=_.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);if(r&&r[1]){c=r[1].replace(/['"]/g,"");try{c=decodeURIComponent(c)}catch{}}}const h=window.URL.createObjectURL(new Blob([l.data])),s=document.createElement("a");s.href=h,s.setAttribute("download",c),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(h),n.success("导出成功")}catch(e){if(console.error("导出投票数据失败:",e),e.response?.data instanceof Blob){const a=new FileReader;a.onload=()=>{try{const o=JSON.parse(a.result);n.error(o.detail||"导出失败")}catch{n.error("导出失败")}},a.readAsText(e.response.data)}else n.error(e.response?.data?.detail||e.message||"导出失败");throw e}}export{b as M,u as T,M as V,k as a,L as b,U as c,R as e,x as g};
