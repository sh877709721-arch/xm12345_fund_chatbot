import{y as w,r,u as O,j as e,f as V,G,P as R,e as J,A as K,C as Q,a7 as U,d as u,l as W,H as X,J as Y,K as Z,L as ee,B as te,ab as se}from"./index-BkZ1fbvE.js";import{a as A,M as ae,R as ne,C as oe,b as re,c as le,P as ie,d as ce,e as de,f as me,g as ue,h as xe,i as pe,j as he}from"./prompt-input-BfJIM37A.js";import{B as fe}from"./badge-D8rsmH0n.js";import{C as _,S as ge,a as be,b as je,c as ve,d as y}from"./select-BVe2FuYJ.js";import{S as Ne}from"./search-CLI9qL7o.js";import{L as Ce}from"./label-BPYBCH7t.js";import"./vote-XaGOkas7.js";import"./popover-DRNDwRi0.js";import"./textarea-DrbJn6hG.js";import"./dialog-DdHcYUWU.js";import"./textarea-DZUYYOaG.js";import"./loader-circle-qc_e4yNT.js";import"./index-BdQq_4o_.js";import"./index-JW4qzHJT.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],k=w("brain",ye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Te=w("circle-check-big",we);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],C=w("dot",ke);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Re=w("eye",Oe);var T="Collapsible",[Ie,ot]=V(T),[Me,I]=Ie(T),E=r.forwardRef((t,s)=>{const{__scopeCollapsible:a,open:l,defaultOpen:o,disabled:c,onOpenChange:i,...m}=t,[p,b]=O({prop:l,defaultProp:o??!1,onChange:i,caller:T});return e.jsx(Me,{scope:a,disabled:c,contentId:G(),open:p,onOpenToggle:r.useCallback(()=>b(j=>!j),[b]),children:e.jsx(R.div,{"data-state":S(p),"data-disabled":c?"":void 0,...m,ref:s})})});E.displayName=T;var B="CollapsibleTrigger",z=r.forwardRef((t,s)=>{const{__scopeCollapsible:a,...l}=t,o=I(B,a);return e.jsx(R.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":S(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...l,ref:s,onClick:J(t.onClick,o.onOpenToggle)})});z.displayName=B;var M="CollapsibleContent",D=r.forwardRef((t,s)=>{const{forceMount:a,...l}=t,o=I(M,t.__scopeCollapsible);return e.jsx(K,{present:a||o.open,children:({present:c})=>e.jsx(Se,{...l,ref:s,present:c})})});D.displayName=M;var Se=r.forwardRef((t,s)=>{const{__scopeCollapsible:a,present:l,children:o,...c}=t,i=I(M,a),[m,p]=r.useState(l),b=r.useRef(null),j=Q(s,b),v=r.useRef(0),n=v.current,h=r.useRef(0),N=h.current,f=i.open||m,g=r.useRef(f),d=r.useRef(void 0);return r.useEffect(()=>{const x=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(x)},[]),U(()=>{const x=b.current;if(x){d.current=d.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const P=x.getBoundingClientRect();v.current=P.height,h.current=P.width,g.current||(x.style.transitionDuration=d.current.transitionDuration,x.style.animationName=d.current.animationName),p(l)}},[i.open,l]),e.jsx(R.div,{"data-state":S(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!f,...c,ref:j,style:{"--radix-collapsible-content-height":n?`${n}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...t.style},children:f&&o})});function S(t){return t?"open":"closed"}var Pe=E;function Ae({...t}){return e.jsx(Pe,{"data-slot":"collapsible",...t})}function L({...t}){return e.jsx(z,{"data-slot":"collapsible-trigger",...t})}function F({...t}){return e.jsx(D,{"data-slot":"collapsible-content",...t})}const $=r.createContext(null),_e=()=>{const t=r.useContext($);if(!t)throw new Error("ChainOfThought components must be used within ChainOfThought");return t},Ee=r.memo(({className:t,open:s,defaultOpen:a=!1,onOpenChange:l,children:o,...c})=>{const[i,m]=O({prop:s,defaultProp:a,onChange:l}),p=r.useMemo(()=>({isOpen:i,setIsOpen:m}),[i,m]);return e.jsx($.Provider,{value:p,children:e.jsx("div",{className:u("not-prose max-w-prose space-y-4",t),...c,children:o})})}),Be=r.memo(({className:t,children:s,...a})=>{const{isOpen:l}=_e();return e.jsxs(L,{className:u("flex w-full items-center gap-2 text-muted-foreground text-sm transition-colors hover:text-foreground",t),...a,children:[e.jsx(k,{className:"size-4"}),e.jsx("span",{className:"flex-1 text-left",children:s??"Chain of Thought"}),e.jsx(_,{className:u("size-4 transition-transform",l?"rotate-180":"rotate-0")})]})}),q=r.memo(({className:t,icon:s=C,label:a,description:l,status:o="complete",children:c,...i})=>{const m={complete:"text-muted-foreground",active:"text-foreground",pending:"text-muted-foreground/50"};return e.jsxs("div",{className:u("flex gap-2 text-sm",m[o],"fade-in-0 slide-in-from-top-2 animate-in",t),...i,children:[e.jsxs("div",{className:"relative mt-0.5",children:[e.jsx(s,{className:"size-4"}),e.jsx("div",{className:"-mx-px absolute top-7 bottom-0 left-1/2 w-px bg-border"})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{children:a}),l&&e.jsx("div",{className:"text-muted-foreground text-xs",children:l}),c]})]})}),ze=r.memo(({className:t,...s})=>e.jsx("div",{className:u("flex items-center gap-2",t),...s})),De=r.memo(({className:t,children:s,...a})=>e.jsx(fe,{className:u("gap-1 px-2 py-0.5 font-normal text-xs",t),variant:"secondary",...a,children:s})),Le=r.memo(({className:t,children:s,...a})=>e.jsx(F,{className:u("mt-2 space-y-3","data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 text-popover-foreground outline-none data-[state=closed]:animate-out data-[state=open]:animate-in",t),...a,children:s})),H=r.memo(({className:t,thoughtSteps:s,open:a,defaultOpen:l=!1,onOpenChange:o,isStreaming:c=!1,...i})=>{const[m,p]=O({prop:a,defaultProp:l,onChange:o}),b=n=>{switch(n){case"thought":return k;case"action":return Ne;case"observation":return Re;case"final":return Te;default:return C}},j=n=>{switch(n){case"thought":return"æ€è€ƒ";case"action":return"è¡ŒåŠ¨";case"observation":return"è§‚å¯Ÿ";case"final":return"æœ€ç»ˆç­”æ¡ˆ";default:return"æœªçŸ¥"}},v=n=>{switch(n){case"complete":return"complete";case"error":return"pending";case"pending":return"active";default:return"complete"}};return!s||s.length===0?null:e.jsx("div",{className:u("not-prose max-w-prose space-y-4",t),...i,children:e.jsxs(Ae,{open:m,onOpenChange:p,children:[e.jsxs(L,{className:"flex w-full items-center gap-2 text-muted-foreground text-sm transition-colors hover:text-foreground",children:[e.jsx(k,{className:"size-4"}),e.jsx("span",{className:"flex-1 text-left",children:"æ€è€ƒè¿‡ç¨‹"}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.length>0&&e.jsx("span",{className:"bg-muted text-muted-foreground px-2 py-0.5 rounded-full text-xs",children:s.length}),c&&e.jsx("span",{className:"text-xs text-muted-foreground animate-pulse",children:"(è¿›è¡Œä¸­...)"}),e.jsx(_,{className:u("size-4 transition-transform",m?"rotate-180":"rotate-0")})]})]}),e.jsxs(F,{className:u("mt-2 space-y-3","data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 text-popover-foreground outline-none data-[state=closed]:animate-out data-[state=open]:animate-in"),children:[s.map((n,h)=>{const N=h===s.length-1,f=n.type==="final"&&N;return e.jsx(q,{icon:b(n.type),label:j(n.type),status:v(n.status),className:f?"border-l-4 border-l-green-500 bg-green-50 dark:bg-green-950/20 -ml-1 pl-5":"",children:e.jsx("div",{className:u("prose prose-sm max-w-none break-words",n.type==="final"&&"text-foreground font-medium",n.type==="action"&&"text-blue-600 dark:text-blue-400",n.type==="observation"&&"text-orange-600 dark:text-orange-400",n.type==="thought"&&"text-muted-foreground",f&&"text-base font-semibold text-green-700 dark:text-green-300"),children:n.type==="action"&&n.content.includes("ä½¿ç”¨å·¥å…·:")?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:n.content.split(`
`)[0]}),n.content.includes(`
å‚æ•°:`)&&e.jsx("div",{className:"text-xs bg-muted p-2 rounded border-l-2 border-blue-400",children:e.jsx("div",{className:"font-mono",children:n.content.split(`
å‚æ•°:`)[1]})})]}):e.jsxs("div",{children:[f&&e.jsx("div",{className:"mb-2 text-sm font-medium text-green-600 dark:text-green-400",children:"ğŸ’¡ æœ€ç»ˆç­”æ¡ˆï¼š"}),e.jsx(A,{content:n.content})]})})},n.id||h)}),c&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground animate-pulse py-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"size-4"}),e.jsx(C,{className:"size-4"}),e.jsx(C,{className:"size-4"})]}),e.jsx("span",{children:"æ­£åœ¨æ€è€ƒ..."})]})]})]})})}),Fe=r.memo(({className:t,children:s,caption:a,...l})=>e.jsxs("div",{className:u("mt-2 space-y-2",t),...l,children:[e.jsx("div",{className:"relative flex max-h-[22rem] items-center justify-center overflow-hidden rounded-lg bg-muted p-3",children:s}),a&&e.jsx("p",{className:"text-muted-foreground text-xs",children:a})]}));Ee.displayName="ChainOfThought";Be.displayName="ChainOfThoughtHeader";q.displayName="ChainOfThoughtStep";ze.displayName="ChainOfThoughtSearchResults";De.displayName="ChainOfThoughtSearchResult";Le.displayName="ChainOfThoughtContent";Fe.displayName="ChainOfThoughtImage";H.displayName="ChainOfThoughtAuto";const $e=({className:t,from:s,messageId:a,messageDbId:l,feedback:o,onFeedbackChange:c,onToggleChainOfThought:i,thoughtSteps:m,showChainOfThought:p=!1,hasChainOfThought:b=!1,chatStatus:j,isStreaming:v=!1,recommendQa:n,isLast:h=!1,sources:N,children:f,...g})=>e.jsxs("div",{className:u("group flex w-full items-start gap-2 py-4",s==="user"?"justify-end":"justify-start",t),...g,children:[s==="assistant"&&e.jsx(Ve,{src:"./assets/12345.png",name:"AIåŠ©æ‰‹"}),e.jsxs("div",{className:u("flex flex-col max-w-[90%] sm:max-w-[85%]",s==="user"&&"items-end"),children:[s==="assistant"&&b&&m&&m.length>0&&e.jsx(H,{thoughtSteps:m,defaultOpen:p,isStreaming:v,className:"mb-3"}),e.jsx("div",{className:u("rounded-lg inline-block w-full overflow-hidden",s==="user"?"bg-primary text-primary-foreground":"bg-secondary text-foreground"),children:h&&s==="assistant"&&j==="submitted"&&s==="assistant"&&j==="submitted"?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-md bg-muted/50 border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-primary rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("span",{className:"inline-block w-2 h-2 bg-primary rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("span",{className:"inline-block w-2 h-2 bg-primary rounded-full animate-bounce"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ç­‰å¾…è¿”å›ä¸­..."})]}):f}),s==="assistant"&&a!==void 0&&(c||i)&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2 px-2 sm:px-3 py-2 rounded-md bg-muted/50 border border-border/50",children:e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground leading-relaxed break-words",children:"ä»¥ä¸Šä¿¡æ¯ä»…ä¾›å‚è€ƒï¼Œå…¬ç§¯é‡‘æ”¿ç­–è§£è¯»åŠä¸šåŠ¡åŠç†ä»¥ç°è¡Œæ”¿ç­–å’Œå¦é—¨å¸‚å…¬ç§¯é‡‘æœºæ„æœ€ç»ˆå®¡æ ¸ç»“æœä¸ºå‡†ï¼Œè¯•è¿è¡ŒæœŸé—´ï¼Œè‹¥æœ‰ä¸æ˜è¯·è‡³çª—å£æˆ–æ‹¨æ‰“12345äººå·¥æœåŠ¡ã€‚å¦‚é‡è®¿é—®é“¾æ¥æ— æ³•æ‰“å¼€æƒ…å†µï¼Œè¯·å¤åˆ¶é“¾æ¥åœ°å€åˆ°æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚"})}),e.jsx(ae,{messageId:a,feedback:o,onFeedbackChange:c,onToggleChainOfThought:i,showChainOfThought:p})]}),s==="assistant"&&v==!1&&h==!0&&n&&e.jsx(ne,{questions:n})]})]}),qe=W("flex flex-col gap-1 overflow-hidden text-sm",{variants:{variant:{contained:[],flat:[]}},defaultVariants:{variant:"contained"}}),He=({children:t,className:s,variant:a,messageId:l,isUser:o=!1,sources:c,...i})=>e.jsx("div",{className:u("px-3 py-3 sm:px-4","overflow-x-hidden overflow-wrap-break-word break-words",qe({variant:a,className:s})),...i,children:typeof t=="string"?e.jsx(A,{messageId:l,content:t,isUser:o,sources:c}):t}),Ve=({src:t,name:s,className:a,...l})=>e.jsxs(X,{className:u("size-8 ring-1 ring-border",a),...l,children:[e.jsx(Y,{alt:"",className:"mt-0 mb-0",src:t}),e.jsx(Z,{children:s?.slice(0,2)||"ME"})]});const rt=()=>{const[t,s]=r.useState(""),{messages:a,sendMessage:l,status:o,stop:c,updateMessageFeedback:i,toggleChainOfThought:m,recommendQa:p,model:b,setModel:j,resetChatSession:v}=ee(),n=r.useRef(null),h=r.useRef(null),N=()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)};r.useEffect(()=>{N()},[]),r.useEffect(()=>{N()},[a]);const f=g=>{if(o==="streaming"||o==="submitted"){c();return}const d=!!g.text,x=!!g.files?.length;(d||x)&&(l(g.text||""),s(""))};return e.jsxs("div",{className:"h-full flex flex-col min-h-0 px-4 sm:px-5 lg:px-6 relative",children:[e.jsx("div",{ref:h,className:"absolute bg-background top-[1px] bottom-[115px] left-0 right-0 overflow-y-auto",children:e.jsxs(oe,{className:"flex-1 min-h-0 max-w-full sm:max-w-2xl lg:max-w-3xl mx-auto w-full",children:[e.jsx(re,{children:a.map(({content:g,...d},x)=>e.jsx($e,{from:d.role,messageId:d.id,messageDbId:d.db_id,feedback:d.feedback,onFeedbackChange:i,onToggleChainOfThought:m,thoughtSteps:d.thoughtSteps,showChainOfThought:d.showChainOfThought,hasChainOfThought:d.hasChainOfThought,chatStatus:o,isStreaming:o==="streaming"&&d.role==="assistant",recommendQa:p,isLast:x===a.length-1,sources:d.sources,children:e.jsx(He,{messageId:d.id,isUser:d.role==="user",sources:d.sources,children:g})},d.id))}),e.jsx(le,{})]})}),e.jsx("div",{className:"bg-background absolute left-0 right-0 bottom-0 z-20 px-2 sm:px-4",children:e.jsxs("div",{className:"max-w-full sm:max-w-2xl lg:max-w-3xl mx-auto",children:[e.jsxs(ie,{onSubmit:f,className:"mt-2",globalDrop:!0,multiple:!0,children:[e.jsx(ce,{children:e.jsx(de,{onChange:g=>s(g.target.value),ref:n,value:t})}),e.jsxs(me,{children:[e.jsx(ue,{children:e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{htmlFor:"model-select",className:"text-sm text-muted-foreground",children:"æ¨¡å‹:"}),e.jsxs(ge,{value:b,onValueChange:j,children:[e.jsx(be,{id:"model-select",className:"w-40",children:e.jsx(je,{})}),e.jsxs(ve,{children:[e.jsx(y,{value:"default",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:"é»˜è®¤"})})}),e.jsx(y,{value:"boost",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:"çŸ¥è¯†å›¾è°±"})})}),e.jsx(y,{value:"guideline_bot",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:"æŒ‡å—æ¨¡å¼"})})}),e.jsx(y,{value:"react_bot",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:"æ€è€ƒæ¨¡å¼"})})})]})]})]})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{variant:"ghost",size:"icon",onClick:()=>v(!0),title:"é‡ç½®ä¼šè¯",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx(pe,{mode:"xfyun",onTranscriptionChange:s,textareaRef:n}),e.jsx(he,{disabled:!t&&!o,status:o})]})]})]}),e.jsx("div",{className:"text-[9px] sm:text-[10px] text-gray-400 text-center mt-1 leading-tight px-2",children:"ç”Ÿæˆå¼äººå·¥æ™ºèƒ½å£°æ˜ï¼šå†…å®¹ç”±AIç”Ÿæˆï¼Œè¯·ç”„åˆ«ä½¿ç”¨"})]})})]})};export{rt as default};
